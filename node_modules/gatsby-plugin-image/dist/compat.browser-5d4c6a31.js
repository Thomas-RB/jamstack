import r,{useRef as e,useState as t,useEffect as n}from"react";function a(){return(a=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r}).apply(this,arguments)}function o(r,e){if(null==r)return{};var t,n,a={},o=Object.keys(r);for(n=0;n<o.length;n++)e.indexOf(t=o[n])>=0||(a[t]=r[t]);return a}var i=function(){function r(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),s=Object.freeze(Object.defineProperties(["",""],{raw:{value:Object.freeze(["",""])}}));function u(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}var c=function(){function r(){for(var e=this,t=arguments.length,n=Array(t),a=0;a<t;a++)n[a]=arguments[a];return u(this,r),this.tag=function(r){for(var t=arguments.length,n=Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return"function"==typeof r?e.interimTag.bind(e,r):"string"==typeof r?e.transformEndResult(r):(r=r.map(e.transformString.bind(e)),e.transformEndResult(r.reduce(e.processSubstitutions.bind(e,n))))},n.length>0&&Array.isArray(n[0])&&(n=n[0]),this.transformers=n.map(function(r){return"function"==typeof r?r():r}),this.tag}return i(r,[{key:"interimTag",value:function(r,e){for(var t=arguments.length,n=Array(t>2?t-2:0),a=2;a<t;a++)n[a-2]=arguments[a];return this.tag(s,r.apply(void 0,[e].concat(n)))}},{key:"processSubstitutions",value:function(r,e,t){var n=this.transformSubstitution(r.shift(),e);return"".concat(e,n,t)}},{key:"transformString",value:function(r){return this.transformers.reduce(function(r,e){return e.onString?e.onString(r):r},r)}},{key:"transformSubstitution",value:function(r,e){return this.transformers.reduce(function(r,t){return t.onSubstitution?t.onSubstitution(r,e):r},r)}},{key:"transformEndResult",value:function(r){return this.transformers.reduce(function(r,e){return e.onEndResult?e.onEndResult(r):r},r)}}]),r}(),l=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{onEndResult:function(e){if(""===r)return e.trim();if("start"===(r=r.toLowerCase())||"left"===r)return e.replace(/^\s*/,"");if("end"===r||"right"===r)return e.replace(/\s*$/,"");throw new Error("Side not supported: "+r)}}};function f(r){if(Array.isArray(r)){for(var e=0,t=Array(r.length);e<r.length;e++)t[e]=r[e];return t}return Array.from(r)}var g=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"initial";return{onEndResult:function(e){if("initial"===r){var t=e.match(/^[^\S\n]*(?=\S)/gm),n=t&&Math.min.apply(Math,f(t.map(function(r){return r.length})));if(n){var a=new RegExp("^.{"+n+"}","gm");return e.replace(a,"")}return e}if("all"===r)return e.replace(/^[^\S\n]+/gm,"");throw new Error("Unknown type: "+r)}}},d=function(r,e){return{onEndResult:function(t){if(null==r||null==e)throw new Error("replaceResultTransformer requires at least 2 arguments.");return t.replace(r,e)}}},p=function(r,e){return{onSubstitution:function(t,n){if(null==r||null==e)throw new Error("replaceSubstitutionTransformer requires at least 2 arguments.");return null==t?t:t.toString().replace(r,e)}}},m={separator:"",conjunction:"",serial:!1},y=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m;return{onSubstitution:function(e,t){if(Array.isArray(e)){var n=e.length,a=r.separator,o=r.conjunction,i=r.serial,s=t.match(/(\n?[^\S\n]+)$/);if(e=e.join(s?a+s[1]:a+" "),o&&n>1){var u=e.lastIndexOf(a);e=e.slice(0,u)+(i?a:"")+" "+o+e.slice(u+1)}}return e}}},h=function(r){return{onSubstitution:function(e,t){if(null==r||"string"!=typeof r)throw new Error("You need to specify a string character to split by.");return"string"==typeof e&&e.includes(r)&&(e=e.split(r)),e}}},b=function(r){return null!=r&&!Number.isNaN(r)&&"boolean"!=typeof r},v=(new c(y({separator:","}),g,l),new c(y({separator:",",conjunction:"and"}),g,l),new c(y({separator:",",conjunction:"or"}),g,l),new c(h("\n"),function(){return{onSubstitution:function(r){return Array.isArray(r)?r.filter(b):b(r)?r:""}}},y,g,l),new c(h("\n"),y,g,l,p(/&/g,"&amp;"),p(/</g,"&lt;"),p(/>/g,"&gt;"),p(/"/g,"&quot;"),p(/'/g,"&#x27;"),p(/`/g,"&#x60;")),new c(d(/(?:\n(?:\s*))+/g," "),l),new c(d(/(?:\n\s*)/g,""),l),new c(y({separator:","}),d(/(?:\s+)/g," "),l),new c(y({separator:",",conjunction:"or"}),d(/(?:\s+)/g," "),l),new c(y({separator:",",conjunction:"and"}),d(/(?:\s+)/g," "),l),new c(y,g,l),new c(y,d(/(?:\s+)/g," "),l),new c(g,l),new c(g("all"),l),new Set),w=function(){return"undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype};function S(r){r&&v.add(r)}function E(r){return v.has(r)}function A(r,e,t,n,o,i,s,u){return void 0===u&&(u={}),global.GATSBY___IMAGE||(u=a({height:"100%",left:0,position:"absolute",top:0,transform:"translateZ(0)",transition:"opacity 250ms linear",width:"100%",willChange:"opacity"},u)),a({},t,{loading:n,shouldLoad:r,"data-main-image":"",style:a({},u,{opacity:e?1:0}),onLoad:function(r){if(!e){S(i);var t=r.currentTarget,n=new Image;n.src=t.currentSrc,n.decode?n.decode().catch(function(){}).then(function(){o(!0)}):o(!0)}},ref:s})}function k(r,e,t,n,o,i){var s={};i&&(s.backgroundColor=i,"fixed"===t?(s.width=n,s.height=o,s.backgroundColor=i,s.position="relative"):("constrained"===t||"fluid"===t)&&(s.position="absolute",s.top=0,s.left=0,s.bottom=0,s.right=0));var u=a({},r,{"aria-hidden":!0,"data-placeholder-image":"",style:a({opacity:e?0:1,transition:"opacity 500ms linear"},s)});return global.GATSBY___IMAGE||(u.style={height:"100%",left:0,position:"absolute",top:0,width:"100%"}),u}var j=!1,O=function(i){var s=i.as,u=void 0===s?"div":s,c=i.style,l=i.className,f=i.class,g=i.onStartLoad,d=i.image,p=i.onLoad,m=i.backgroundColor,y=o(i,["as","style","className","class","onStartLoad","image","onLoad","backgroundColor"]);if(!d)return"development"===process.env.NODE_ENV&&console.warn("[gatsby-plugin-image] Missing image prop"),null;f&&(l=f);var h=d.width,b=d.height,v=d.layout,E=d.images,A=e(),k=e(!1),O=e(null),_=e(null),N=e(),L=t(w()),T=L[0],C=L[1],x=t(!1),G=x[0],I=x[1];global.GATSBY___IMAGE||j||(j=!0,console.warn('[gatsby-plugin-image] You\'re missing out on some cool performance features. Please add "gatsby-plugin-image" to your gatsby-config.js'));var R=function(r,e,t){var n={position:"relative",overflow:"hidden"};return"fixed"===t?(n.width=r,n.height=e):"constrained"===t&&(n.display="inline-block"),{className:"gatsby-image-wrapper","data-gatsby-image-wrapper":"",style:n}}(h,b,v),M=R.style,z=R.className,Y=o(R,["style","className"]);return n(function(){if(A.current){var r=A.current.querySelector("[data-gatsby-image-ssr]");if(w()&&r&&global.GATSBY___IMAGE)return null==g||g({wasCached:!1}),r.complete&&(null==p||p(),S(JSON.stringify(E))),void r.addEventListener("load",function e(){r.removeEventListener("load",e),null==p||p(),S(JSON.stringify(E))});import("./intersection-observer-3b889788.js").then(function(r){var e=(0,r.createIntersectionObserver)(function(){A.current&&(null==g||g({wasCached:!1}),C(!0))});A.current&&(O.current=e(A))})}return function(){O.current&&(O.current(A),k.current&&_.current&&_.current())}},[]),n(function(){if(A.current){var r=A.current.querySelector("[data-gatsby-image-ssr]");if(w()&&r&&!k.current)return void(k.current=!0);r||(k.current=!0),import("./lazy-hydrate-b486244d.js").then(function(r){_.current=(0,r.lazyHydrate)(a({image:d,isLoading:T,isLoaded:G,toggleIsLoaded:function(){null==p||p(),I(!0)},ref:N},y),A,k)})}},[h,b,v,E,T,G,I,N,y]),r.createElement(u,Object.assign({},Y,{style:a({},M,c,{backgroundColor:m}),className:z+(l?" "+l:""),ref:A,dangerouslySetInnerHTML:{__html:""},suppressHydrationWarning:!0}))},_=function(e){return r.createElement(O,Object.assign({},e))};function N(){"development"===process.env.NODE_ENV&&console.warn('gatsby-plugin-image/compat does not support passing arrays to "fixed" or "fluid"')}function L(e){return function(t){var n=t.fixed,i=t.fluid,s=t.backgroundColor,u=t.critical,c=t.Tag,l=o(t,["fixed","fluid","backgroundColor","critical","Tag"]),f=a({alt:"",as:c,image:void 0},l);if(s&&(f.style=f.style||{},f.style.backgroundColor=!0===s?"light-gray":s),u&&(f.loading="eager"),n){Array.isArray(n)&&(N(),n=n[0]);var g={placeholder:void 0,layout:"fixed",width:n.width,height:n.height,images:{fallback:{src:n.src,srcSet:n.srcSet},sources:[]}},d=n.tracedSVG||n.base64;d&&(g.placeholder={fallback:d}),n.srcSetWebp&&g.images.sources.push({srcSet:n.srcSetWebp,type:"image/webp"}),f.image=g}else if(i){Array.isArray(i)&&(N(),i=i[0]);var p={width:1,height:i.aspectRatio,layout:"fluid",images:{fallback:{src:i.src,srcSet:i.srcSet,sizes:i.sizes},sources:[]}},m=i.tracedSVG||i.base64;m&&(p.placeholder={fallback:m}),i.srcSetWebp&&p.images.sources.push({srcSet:i.srcSetWebp,type:"image/webp",sizes:i.sizes}),f.image=p}return r.createElement(e,Object.assign({},l,f))}}_.displayName="GatsbyImage";var T=L(_);export{T as G,L as _,o as a,a as b,E as c,A as d,k as g,w as h};
//# sourceMappingURL=compat.browser-5d4c6a31.js.map
